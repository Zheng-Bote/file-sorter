# FileSorter ğŸ“‚

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Language](https://img.shields.io/badge/language-C%2B%2B23-00599C.svg)
![Framework](https://img.shields.io/badge/framework-Qt6-41CD52.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

<p>keep your Downloads folder organized</p>

<hr>

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**

- [FileSorter ğŸ“‚](#filesorter-)
  - [âœ¨ Key Features](#-key-features)
- [Documentation \& Screenshots](#documentation--screenshots)
  - [ğŸ—ï¸ Architecture](#ï¸-architecture)
    - [Component Overview](#component-overview)
    - [Class Diagram](#class-diagram)
    - [Sorting Flow Logic](#sorting-flow-logic)
- [ğŸš€ Getting Started](#-getting-started)
  - [Windows](#windows)
    - [Setup](#setup)
  - [Build Instructions](#build-instructions)
  - [Project Structure](#project-structure)
- [âš™ï¸ Configuration](#ï¸-configuration)
- [ğŸ¤ Contributing](#-contributing)
- [ğŸ“„ License](#-license)
- [ğŸ‘¤ Author](#-author)
  - [Code Contributors](#code-contributors)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<hr>



**FileSorter** is a robust, cross-platform desktop application designed to keep your Downloads folder organized. Built with modern **C++23** and **Qt6**, it automatically detects new files and sorts them into subdirectories based on user-defined rules.

## âœ¨ Key Features

* **Real-time Monitoring:** Uses `QFileSystemWatcher` to detect new files immediately.
* **Smart Debouncing:** Waits for downloads to finish (via `QTimer`) before moving files to avoid corruption.
* **Flexible Rules:** Map specific file extensions (e.g., `pdf, docx`) to custom folders.
* **Date-based Sorting:** Optional setting per rule to organize files into `YYYY/MM/DD` substructures.
* **Cross-Platform:** Runs seamlessly on Windows, macOS, and Linux.
* **Internationalization (i18n):** Automatically switches between **English** and **German** based on system settings.
* **Persistent Configuration:** Rules are saved automatically using `QSettings` (Registry/Ini/Plist).

---

# Documentation & Screenshots

![App Screenshot](https://github.com/Zheng-Bote/file-sorter/blob/main/docs/img/01_de.png)
![App Screenshot](https://github.com/Zheng-Bote/file-sorter/blob/main/docs/img/about_de.png)

---
## ğŸ—ï¸ Architecture

The application follows a clean separation of concerns, splitting the User Interface (UI) from the business logic.

### Component Overview

1.  **MainWindow (UI):** Handles user interaction, configuration (TableWidget), and displays logs. It manages the application lifecycle.
2.  **FileSorter (Logic):** A `QObject` based worker class. It handles:
    * File system monitoring (`QFileSystemWatcher`).
    * Debouncing logic to wait for file write operations.
    * The actual sorting algorithm (Pattern matching & `std::filesystem`/`QDir` operations).
3.  **Config & Resources:**
    * `rz_config.hpp`: Generated by CMake for versioning and metadata.
    * `QSettings`: Stores sorting rules persistently.
    * `Qt Linguist`: Handles translations (`.ts` / `.qm`).

### Class Diagram

```mermaid
classDiagram
    class MainWindow {
        +QTableWidget* m_table
        +QTextEdit* m_logOutput
        +QCheckBox* m_autoSortCheck
        -setupUI()
        -saveSettings()
        -loadSettings()
    }

    class FileSorter {
        +void sortDownloads(List categories)
        +void setMonitoring(bool enable)
        -QFileSystemWatcher* m_watcher
        -QTimer* m_debounceTimer
        -onDirectoryChanged()
    }

    class Category {
        +QString folderName
        +QStringList extensions
        +bool useDatePath
    }

    class AboutDialog {
        +AboutDialog(QWidget* parent)
    }

    MainWindow *-- FileSorter : owns
    MainWindow ..> Category : creates
    MainWindow ..> AboutDialog : shows
    FileSorter -- QFileSystemWatcher : uses
    FileSorter -- QTimer : uses
```

### Sorting Flow Logic

When Automatic Monitoring is enabled, the application follows this process:

```mermaid
flowchart TD
    A["Start / New File Detected"] --> B{"Is Debounce Timer Active?"}
    B -- Yes --> C["Reset Timer"]
    B -- No --> D["Start Timer (e.g. 2s)"]
    C --> E["Wait..."]
    D --> E
    E --> F{"Timer Timeout"}
    F --> G["Scan Download Directory"]
    G --> H{"File matches Rule?"}
    H -- No --> I["Skip File"]
    H -- Yes --> J{"Date Sorting Enabled?"}
    J -- Yes --> K["Create Path: Folder/YYYY/MM/DD"]
    J -- No --> L["Create Path: Folder/"]
    K --> M["Move File"]
    L --> M
    M --> N["Log Action"]
```

# ğŸš€ Getting Started

## Windows

### Setup 

There are two options:

1. Unzip

   -> no Administrator rights needed
- unzip `FileSorter-1.0.0-win64.zip` and execute `FilesSorter.exe`

2. Setup

   -> no Administrator rights needed (optional)
- execute `FileSorter_x86_amd64_v1.0.0_setup.exe` and follow the instructions.
- doubleclick `FileSorter.exe` or your Desktop-Shortcut
  

***Prerequisites***
- C++ Compiler supporting C++23 (GCC 13+, Clang 16+, MSVC 2022 v17.6+)
- CMake (3.23 or newer)
- Qt 6 (Core, Gui, Widgets, LinguistTools)

## Build Instructions

```Bash
# 1. Clone the repository
git clone [https://github.com/Zheng-Bote/file-sorter.git](https://github.com/Zheng-Bote/file-sorter.git)
cd file-sorter

# 2. Create build directory
mkdir build && cd build

# 3. Configure with CMake
cmake -DCMAKE_BUILD_TYPE=Release ..

# 4. Build
cmake --build . --config Release

# 5. Installer packages
cpack.exe -C Release
# in some cases (if Chocolatey is installed on your system) the complete path to your Qt cpack is needed
& "C:\Qt\Tools\CMake_64\bin\cpack.exe" -C Release
```

## Project Structure

```Plaintext
file-sorter/
â”œâ”€â”€ CMakeLists.txt       # Build configuration
â”œâ”€â”€ rz_config.hpp.in     # Template for versioning info
â”œâ”€â”€ resources.qrc        # Resource file (icons, etc.)
â”œâ”€â”€ include/             # Header files (*.hpp)
â”œâ”€â”€ src/                 # Source files (*.cpp)
â”œâ”€â”€ translations/        # Translation files (*.ts)
â””â”€â”€ configure/           # CMake configuration scripts
```

# âš™ï¸ Configuration

1. Launch the application.
2. Click "+" to add a new rule.
3. Folder Name: Enter the target subfolder name (e.g., Images).
4. Extensions: Comma-separated list (e.g., jpg, png, svg).
5. Use Date?: Check this box to organize files by year/month/day within the target folder.
6. Enable "Automatic Monitoring" to let the app work in the background.

To remove a rule, select the row and click "-".

# ğŸ¤ Contributing

Contributions are welcome! Please fork the repository and create a pull request.

1. Fork the Project
2. Create your Feature Branch (git checkout -b feature/AmazingFeature)
3. Commit your Changes (git commit -m 'Add some AmazingFeature')
4. Push to the Branch (git push origin feature/AmazingFeature)
5. Open a Pull Request

# ğŸ“„ License

Distributed under the MIT License. See LICENSE for more information.

# ğŸ‘¤ Author

[![Zheng Robert - Core Development](https://img.shields.io/badge/Github-Zheng_Robert-black?logo=github)](https://www.github.com/Zheng-Bote)

## Code Contributors

![Contributors](https://img.shields.io/github/contributors/Zheng-Bote/qt-desktop_file_encryption-decryption?color=dark-green)

[![Zheng Robert](https://img.shields.io/badge/Github-Zheng_Robert-black?logo=github)](https://www.github.com/Zheng-Bote)

([back to top](#top))

<hr>

:vulcan_salute:
